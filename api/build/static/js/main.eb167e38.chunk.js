(this["webpackJsonpprospectosfront-app"]=this["webpackJsonpprospectosfront-app"]||[]).push([[0],{11:function(e,t,a){},35:function(e,t,a){e.exports=a.p+"static/media/loginback.31c289db.png"},36:function(e,t,a){e.exports=a(91)},41:function(e,t,a){},42:function(e,t,a){},65:function(e,t){},66:function(e,t){},67:function(e,t){},68:function(e,t){},69:function(e,t){},72:function(e,t,a){},73:function(e,t,a){},9:function(e,t,a){e.exports=a.p+"static/media/logo2.5ed1513c.svg"},91:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(33),s=a.n(l),r=(a(41),a(2)),c=function(e){var t=e.userroll,a=e.handleclick,n=e.hidefrom,l=e.action;return n===t?null:o.a.createElement("button",{className:"buton_border cafe",onClick:function(e){return a(e)}},l)},m=function(e){var t=e.userroll,a=e.hidefrom,n=e.message;return a===t?null:o.a.createElement("h3",null,n)},d=(a(11),function(e){var t=e.userroll,a=e.hidefrom,n=e.label,l=e.data;return a===t?null:o.a.createElement("div",{className:"intelifield"},o.a.createElement("div",{className:"intelifield_label"},o.a.createElement("h3",null,n)),o.a.createElement("div",{className:"intelifield_data"},o.a.createElement("h3",{className:"intelifield_data_text"},l)))}),i=function(e){var t=e.userroll,a=e.prospectodata;return null===a||null===a.name?null:o.a.createElement("div",{className:"intelibox"},o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Nombre",data:a.name}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Primer apellido",data:a.lastname}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Segundo apellido",data:a.lastlastname}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Calle",data:a.adress_street}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"NUmero de casa",data:a.adress_number}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Colonia",data:a.adress_colony}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Codigo postal",data:a.adress_cp}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Telefono",data:a.phonenumber}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"RFC",data:a.rfc}),o.a.createElement(d,{userroll:t,hidefrom:"none",label:"Estatus",data:a.status}),o.a.createElement("textarea",{className:"inteliinputtextbox",readOnly:!0,placeholder:"",value:a.reject_details}))},u=a(8),p=(a(42),function(e){var t=e.imagechange;return o.a.createElement("div",{className:"Dropzone"},o.a.createElement("div",{className:"filewraper"},o.a.createElement("input",{className:"FileInput",id:"imageuploader",type:"file",multiple:!1,onChange:function(e){return t(e)}})),o.a.createElement("span",null,"cargar"))}),g=function(e){var t=e.files,a=e.filenames,l=e.fileindex,s=e.removefile,c=e.changename,m=e.changeimage,d=e.show,i=Object(n.useState)(""),u=Object(r.a)(i,2),g=u[0],b=u[1];return Object(n.useEffect)((function(){null===t[l]?b(""):b(t[l].name)}),[t]),!1===d[l]?null:o.a.createElement("div",{className:"documentoitem"},o.a.createElement("div",{className:"textboxfile"},o.a.createElement("input",{className:"documentoname",tag:l,value:a[l],type:"text",placeholder:"nombre del documento",onChange:function(e){return function(e){e.preventDefault(),c(l,e.target.value)}(e)}})),o.a.createElement("div",{className:"textboxfile"},o.a.createElement("h3",{className:"documentoitem_text"},g)),o.a.createElement(p,{tag:l,imagechange:function(e){e.preventDefault(),m(l,e.target.files[0])}}),o.a.createElement("button",{className:"deletefile",onClick:function(e){return function(e){e.preventDefault(),s(l)}(e)}},"quitar"))},b=function(e){var t=e.files,a=e.setFiles,n=e.filenames,l=e.setFilenames,s=e.filepickshow,r=e.setpickfileshow,c=function(e){var o=s.slice();o.splice(e,1),r(o);var c=n.slice();c.splice(e,1),l(c);var m=t.slice();m.splice(e,1),a(m)},m=function(e,t){var a=Object(u.a)(n);a[e]=t,l(a)},d=function(e,n){var o=Object(u.a)(t);o[e]=n,a(o)};return null===t?null:o.a.createElement("div",{className:"caja1"},o.a.createElement("button",{className:"addfiles",onClick:function(e){return function(e){if(e.preventDefault(),10!=s.length){var o=s.slice();o.push(!0),r(o);var c=n.slice();c.push(""),l(c);var m=t.slice();m.push(null),a(m)}}(e)}},"+ agregararchivo"),t.map((function(e,a){return o.a.createElement(g,{key:a,files:t,filenames:n,fileindex:a,removefile:c,changeimage:d,changename:m,show:s})})))},f=function(e){var t=e.userroll,a=e.hidefrom,n=e.label,l=e.data,s=e.setData;return a===t?null:o.a.createElement("div",{className:"inteliboxmedium"},o.a.createElement("div",{className:"intelifield_label"},o.a.createElement("h3",null,n)),o.a.createElement("div",{className:"inteliinput_boxb"},o.a.createElement("textarea",{className:"inteliinputtextbox",placeholder:n,value:l,onChange:function(e){return s(e.target.value)}})))},E=function(e){var t=e.exit,a=e.resume;return o.a.createElement("div",{className:"loginmodal messagebox",id:"advertencia"},o.a.createElement("div",{className:"loginformbox"},o.a.createElement("h1",{className:"mesagetext",id:"advertenciaboxtext"},"Perdera los datos, realmente desea salir?"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){return t(e)}},"salir"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){return a(e)}},"seguir captura")))},v=a(18),h=function(e){var t=e.docname,a=e.imageurl,l=Object(n.useState)(null),s=Object(r.a)(l,2),c=s[0],m=s[1],d=Object(n.useState)(1),i=Object(r.a)(d,2),u=i[0];i[1];return"pdf"==a.slice().split(".").pop()?o.a.createElement("div",{className:"documentolistitem"},o.a.createElement("h3",null,t),o.a.createElement(v.a,{file:a,options:{workerSrc:"/pdf.worker.js"},onLoadSuccess:function(e){var t=e.numPages;m(t)}},o.a.createElement(v.b,{pageNumber:u})),o.a.createElement("p",null,"Page ",u," of ",c)):o.a.createElement("div",{className:"documentolistitem"},o.a.createElement("h3",null,t),o.a.createElement("div",{className:"image_holder_doc"},o.a.createElement("img",{className:"docpreviewimg",src:a,alt:"docimage"})))},x=function(e){var t=e.data;return null===t?null:o.a.createElement("div",{className:"loginformbox"},o.a.createElement("div",{className:"subedocumentos"},o.a.createElement("div",{className:"documentostitulo"},o.a.createElement("h1",null,"Documentos subidos")),o.a.createElement("div",{className:"filescaja1"},t.documentsrequest.map((function(e,a){return o.a.createElement(h,{key:a,docname:t.documentsnames[a],imageurl:e})})))))},y=function(e){var t=e.openstatus,a=e.prospectosData.prospectos;return o.a.createElement("ul",{className:"propectos_ulist"},a.map((function(e){return o.a.createElement(N,{key:e.Id,id:e.Id,name:e.name,lastname:e.lastname,lastlastname:e.lastlastname,status:e.status,openstatus:t,prospectodata:e})})))},N=function(e){var t=e.id,a=e.name,n=e.lastname,l=e.lastlastname,s=e.status,r=e.openstatus,c=e.prospectodata;return o.a.createElement("div",{className:"prospectoitem",onClick:function(e){return function(e){e.preventDefault(),r(t,a,s,c)}(e)}},o.a.createElement("h3",{className:"prospectoitemname"},a),o.a.createElement("h3",{className:"prospectoitemname"},n),o.a.createElement("h3",{className:"prospectoitemname"},l),o.a.createElement("h3",{className:"prospectoitemname"},s))},I=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),l=a[0],s=a[1],d=Object(n.useState)(""),u=Object(r.a)(d,2),p=u[0],g=u[1],v=Object(n.useState)(""),h=Object(r.a)(v,2),N=h[0],I=h[1],L=Object(n.useState)(""),B=Object(r.a)(L,2),j=B[0],O=B[1],C=Object(n.useState)(""),S=Object(r.a)(C,2),k=S[0],_=S[1],T=Object(n.useState)(""),D=Object(r.a)(T,2),w=D[0],M=D[1],H=Object(n.useState)(""),z=Object(r.a)(H,2),P=z[0],A=z[1],F=Object(n.useState)(""),R=Object(r.a)(F,2),U=R[0],J=R[1],q=Object(n.useState)(""),G=Object(r.a)(q,2),V=G[0],K=G[1],Q=Object(n.useState)([null]),W=Object(r.a)(Q,2),X=W[0],Y=W[1],Z=Object(n.useState)([""]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)([!0]),ne=Object(r.a)(ae,2),oe=ne[0],le=ne[1],se=Object(n.useState)(""),re=Object(r.a)(se,2),ce=re[0],me=re[1],de=Object(n.useState)(null),ie=Object(r.a)(de,2),ue=ie[0],pe=ie[1],ge=Object(n.useState)(""),be=Object(r.a)(ge,2),fe=be[0],Ee=be[1],ve=(e.user,e.loged,e.userid),he=e.token,xe=e.prospectosData,ye=e.setProspectosdata,Ne=(e.username,e.userroll),Ie=function(){s(""),g(""),I(""),O(""),_(""),M(""),A(""),J(""),K(""),Ee(""),te([""]),Y([null]),le([!0])},Le=function(e){if("rechazado"===e&&""===fe)return document.getElementById("mesageboxtext").innerHTML="para rechazar un prospecto favor d ecapturar las observaciones del rechazo",void document.getElementById("messagebox").classList.add("openmodal");console.log(e);var t={prosid:ce,status:e,reject_details:fe};fetch("/prospectos/status",{method:"PATCH",mode:"cors",body:JSON.stringify(t),headers:{Authorization:"bearer "+he,Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("updated"===e.message){Ee("");var t="/prospectos/"+ve;"admin"===Ne&&(t="/prospectos"),document.getElementById("loadingbox").classList.add("openmodal"),fetch(t,{method:"GET",mode:"cors",headers:{Authorization:"bearer "+he}}).then((function(e){return e.json()})).then((function(e){document.getElementById("detailspanel").classList.remove("openmodal"),ye(e),e.prospectos.length>0?(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("newprospectopanel").classList.remove("openmodal")):(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="no hay registros",document.getElementById("messagebox").classList.add("openmodal"))})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))}else document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))};if(!xe)return o.a.createElement("div",{className:"prospectospanel"},o.a.createElement("h3",null,"Loading data"));return o.a.createElement("div",{className:"prospectospanel"},o.a.createElement("div",{className:"postheaderitem"},o.a.createElement("h3",null,"Prospectos"),o.a.createElement(c,{userroll:Ne,handleclick:function(e){e.preventDefault(),document.getElementById("newprospectopanel").classList.add("openmodal")},hidefrom:"admin",action:"Nuevo prospecto"})),o.a.createElement(y,{prospectosData:xe,openstatus:function(e,t,a,n){me(e),pe(n),document.getElementById("detailspanel").classList.add("openmodal")}}),o.a.createElement("div",{className:"loginmodal",id:"newprospectopanel"},o.a.createElement("div",{className:"bigform"},o.a.createElement("h1",null,"Agregar un Prospecto"),o.a.createElement("div",{className:"prospectdatosbox"},o.a.createElement("div",{className:"capturadatos"},o.a.createElement("input",{className:"textbox",value:l,type:"text",placeholder:"nombre",onChange:function(e){return s(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:p,type:"text",placeholder:"primer apellido",onChange:function(e){return g(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:N,type:"text",placeholder:"segundo apellido",onChange:function(e){return I(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:j,type:"text",placeholder:"calle",onChange:function(e){return O(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:k,type:"text",placeholder:"numero de casa",onChange:function(e){return _(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:w,type:"text",placeholder:"colonia",onChange:function(e){return M(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:P,type:"text",placeholder:"codigo postal",onChange:function(e){return A(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:U,type:"text",placeholder:"telefono",onChange:function(e){return J(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:V,type:"text",placeholder:"rfc",onChange:function(e){return K(e.target.value)}})),o.a.createElement("div",{className:"subedocumentos"},o.a.createElement(b,{files:X,setFiles:Y,filenames:ee,setFilenames:te,filepickshow:oe,setpickfileshow:le}))),o.a.createElement("div",{className:"formbuttonfooter"},o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){return function(e){if(e.preventDefault(),null!==X){var t=[];if(""===l&&t.push("nombre, "),""===p&&t.push("apellido, "),""===j&&t.push("calle, "),""===k&&t.push("numero de casa, "),""===w&&t.push("colonia,"),""===P&&t.push("codigo postal, "),""===U&&t.push("telefono, "),""===V&&t.push("RFC, "),t.length>0){for(var a="Los campos:  ",n=0;n<t.length;n++)a+=t[n];return a+="son requeridos",document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML=a,void document.getElementById("messagebox").classList.add("openmodal")}if(0===X.length)return document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="un documento es requerido para realizar la captura",void document.getElementById("messagebox").classList.add("openmodal");document.getElementById("loadingbox").classList.add("openmodal");for(var o="",s=[],r=0;r<ee.length;r++)if(!0===oe[r]){if(0===ee[r].length||null===X[r])return document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="uno o mas docuentos sin nombre, o no ha seleccionado un archivo, si no desea subir ese documento haga click en remove",void document.getElementById("messagebox").classList.add("openmodal");s.push(ee[r])}for(var c=0;c<s.length;c++)o+=s[c],c<s.length-1&&(o+=".%.");var m=new FormData;m.append("user",ve),m.append("name",l),m.append("lastname",p),m.append("lastlastname",N),m.append("adress_street",j),m.append("adress_number",k),m.append("adress_colony",w),m.append("adress_cp",P),m.append("phonenumber",U),m.append("rfc",V),m.append("documentosnames",o),m.append("status","enviado");for(var d=0;d<X.length;d++)!0===oe[d]&&null!==X[d]&&m.append("multi-files",X[d]);fetch("/prospectos",{method:"POST",mode:"cors",body:m,headers:{Authorization:"bearer "+he}}).then((function(e){return e.json()})).then((function(e){if("prospecto creado"===e.message){Ie(),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="prospecto a\xf1adido con exito",document.getElementById("messagebox").classList.add("openmodal");var t="/prospectos/"+ve;"admin"===Ne&&(t="/prospectos"),document.getElementById("loadingbox").classList.add("openmodal"),fetch(t,{method:"GET",mode:"cors",headers:{Authorization:"bearer "+he}}).then((function(e){return e.json()})).then((function(e){e.prospectos.length>0?(ye(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("newprospectopanel").classList.remove("openmodal")):(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal"))})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))}else document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))}}(e)}},"Enviar prospecto"),o.a.createElement("button",{className:"buton_normal blanco",onClick:function(e){return function(e){e.preventDefault(),document.getElementById("advertencia").classList.add("openmodal")}(e)}},"salir")))),o.a.createElement("div",{className:"loginmodal",id:"detailspanel"},o.a.createElement("div",{className:"bigform"},o.a.createElement("h1",null,"Detalle del Propsecto"),o.a.createElement("div",{className:"prospectdatosbox"},o.a.createElement("div",{className:"prospectodatailbox"},o.a.createElement(i,{prospectodata:ue}),o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){return function(e){e.preventDefault(),document.getElementById("attacheddocs").classList.add("openmodal")}(e)}},"Ver documentos")),o.a.createElement("div",{className:"prospectodatailbox"},o.a.createElement(m,{userroll:Ne,hidefrom:"promo",message:"Autorizar o rechazar prospecto"}),o.a.createElement(c,{userroll:Ne,handleclick:function(e){e.preventDefault(),Le("autorizado")},hidefrom:"promo",action:"Autorizar"}),o.a.createElement(c,{userroll:Ne,handleclick:function(e){e.preventDefault(),Le("rechazado")},hidefrom:"promo",action:"Rechazar"}),o.a.createElement(f,{userroll:Ne,hidefrom:"promo",label:"en caso of rechazo capture observaciones",data:fe,setData:Ee}),o.a.createElement(c,{userroll:Ne,handleclick:function(e){e.preventDefault(),document.getElementById("detailspanel").classList.remove("openmodal")},hidefrom:"none",action:"Salir"}))))),o.a.createElement("div",{className:"loginmodal",id:"attacheddocs"},o.a.createElement("div",{className:"bigform"},o.a.createElement(x,{data:ue}),o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){return function(e){e.preventDefault(),document.getElementById("attacheddocs").classList.remove("openmodal")}(e)}},"Salir"))),o.a.createElement(E,{exit:function(e){e.preventDefault(),Ie(),document.getElementById("newprospectopanel").classList.remove("openmodal"),document.getElementById("advertencia").classList.remove("openmodal")},resume:function(e){e.preventDefault(),document.getElementById("advertencia").classList.remove("openmodal")}}))},L=function(e){var t=e.user,a=e.loged,n=e.logout,l=e.userid,s=e.token,r=e.prospectosData,c=e.setProspectosdata,m=e.username,d=e.userroll;return o.a.createElement("div",{className:"dashboard",id:"dashboard"},o.a.createElement("div",{className:"profileheader"},o.a.createElement("div",{className:"profileinfo"},o.a.createElement("h1",{className:"username"},m)),o.a.createElement("button",{className:"logout blanco",onClick:function(e){return n(e)}},"Salir")),o.a.createElement("div",{className:"dashpanelcontainer"},o.a.createElement(I,{user:t,loged:a,token:s,userid:l,prospectosData:r,setProspectosdata:c,username:m,userroll:d})))},B=(a(72),a(73),a(35)),j=a.n(B),O=a(9),C=a.n(O),S=function(e){var t=e.singup,a=e.setuser,n=e.setpass,l=e.user,s=e.password,r=e.close,c=e.username,m=e.setUsername,d=e.userroll,i=e.setUserroll;return o.a.createElement("div",{className:"loginmodal loginboxes",id:"singupmodal"},o.a.createElement("div",{className:"loginformbox"},o.a.createElement("img",{className:"logochico",src:C.a,alt:"logo"}),o.a.createElement("h1",{className:"titlepanel"},"Crear nuevo perfil"),o.a.createElement("input",{className:"textbox",value:l,placeholder:"email",type:"text",onChange:function(e){return a(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:c,placeholder:"username",type:"text",onChange:function(e){return m(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:s,placeholder:"password",type:"text",onChange:function(e){return n(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:d,placeholder:"userroll",type:"text",onChange:function(e){return i(e.target.value)}}),o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){return t(e)}},"Registrar"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){return r(e)}},"Cancelar")))},k=function(e){var t=e.login,a=e.setuser,n=e.setpass,l=e.user,s=e.password,r=e.close;return o.a.createElement("div",{className:"loginmodal loginboxes",id:"loginmodal"},o.a.createElement("div",{className:"loginformbox"},o.a.createElement("img",{className:"logochico",src:C.a,alt:"logo"}),o.a.createElement("h1",{className:"titlepanel"},"Iniciar sesion"),o.a.createElement("input",{className:"textbox",value:l,placeholder:"email",type:"text",onChange:function(e){return a(e.target.value)}}),o.a.createElement("input",{className:"textbox",value:s,placeholder:"password",type:"password",onChange:function(e){return n(e.target.value)}}),o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){return t(e)}},"Iniciar Sesion"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){return r(e)}},"Cancelar")))},_=function(e){var t=e.close;return o.a.createElement("div",{className:"loginmodal messagebox",id:"messagebox"},o.a.createElement("div",{className:"loginformbox"},o.a.createElement("h1",{className:"mesagetext",id:"mesageboxtext"},"message"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){return t(e)}},"ok")))},T=function(){return o.a.createElement("div",{className:"loginmodal loadingbox",id:"loadingbox"},o.a.createElement("div",{className:"loginformbox"},o.a.createElement("h1",{className:"titlepanel"},"Procesando")))},D=(a(74),function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(r.a)(s,2),m=c[0],d=c[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),p=u[0],g=u[1],b=Object(n.useState)(""),f=Object(r.a)(b,2),E=f[0],v=f[1],h=Object(n.useState)(""),x=Object(r.a)(h,2),y=x[0],N=x[1],I=Object(n.useState)(""),B=Object(r.a)(I,2),O=B[0],D=B[1],w=Object(n.useState)(""),M=Object(r.a)(w,2),H=M[0],z=M[1],P=Object(n.useState)(null),A=Object(r.a)(P,2),F=A[0],R=A[1],U=Object(n.useState)(0),J=Object(r.a)(U,2),q=J[0],G=J[1],V=Object(n.useState)(""),K=Object(r.a)(V,2),Q=K[0],W=K[1],X=Object(n.useState)(""),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)(""),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],oe=Object(n.useState)(""),le=Object(r.a)(oe,2),se=le[0],re=le[1];!function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(!0===a&&""!==O&&""!==m){console.log("fetching");var e="/prospectos/"+O;"admin"===E&&(e="/prospectos"),fetch(e,{method:"GET",mode:"cors",headers:{Authorization:"bearer "+m}}).then((function(e){return e.json()})).then((function(e){console.log(e),e.prospectos.length,R(e)})).catch((function(e){console.log(e)}))}G(q+1)}),6e5);return o.a.createElement("div",{className:"fullscreencontainer"},o.a.createElement("div",{className:"midlepanel_h"},o.a.createElement("img",{className:"cover",src:j.a,alt:"cover"})),o.a.createElement("div",{className:"centerlogo"},o.a.createElement("img",{className:"logo",src:C.a,alt:"logo"})),o.a.createElement("div",{className:"midlepanel_h2"},o.a.createElement("h1",{className:"titlepanel"},"Prueba Prospectos."),o.a.createElement("button",{className:"buton_normal cafe",onClick:function(e){document.getElementById("loginmodal").classList.add("openmodal")}},"Entrar"),o.a.createElement("button",{className:"buton_border blanco",onClick:function(e){document.getElementById("singupmodal").classList.add("openmodal")}},"Registrarse")),o.a.createElement(k,{login:function(e){if(e.preventDefault(),""===p||""===H)return document.getElementById("mesageboxtext").innerHTML="por favoe escribe un correo y contrase\xf1a validos",void document.getElementById("messagebox").classList.add("openmodal");var t={email:p,password:H};document.getElementById("loadingbox").classList.add("openmodal"),fetch("/user/login",{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){var t=e.token,a=e.userId,n=e.username,o=e.userroll;if(t){D(a),d(t),N(n),v(o),l(!0),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("loginmodal").classList.remove("openmodal"),document.getElementById("dashboard").classList.add("openmodal");var s="/prospectos/"+a;"admin"===o&&(s="/prospectos"),fetch(s,{method:"GET",mode:"cors",headers:{Authorization:"bearer "+t}}).then((function(e){return e.json()})).then((function(e){console.log(e),e.prospectos.length,R(e)})).catch((function(e){console.log(e)}))}else document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))},setuser:g,setpass:z,user:p,password:H,close:function(e){document.getElementById("loginmodal").classList.remove("openmodal"),e.preventDefault()}}),o.a.createElement(S,{singup:function(e){if(e.preventDefault(),""===se||""===Z)return document.getElementById("mesageboxtext").innerHTML="por favor escribe un correo y contrase\xf1a validos",void document.getElementById("messagebox").classList.add("openmodal");var t={email:se,password:Z,username:ae,userroll:Q};console.log(t),document.getElementById("loadingbox").classList.add("openmodal"),fetch("/user/singup",{method:"POST",mode:"cors",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"bearer "+m}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.message;t?"User created"===t?(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="usuario creado",document.getElementById("messagebox").classList.add("openmodal"),document.getElementById("singupmodal").classList.remove("openmodal"),document.getElementById("loginmodal").classList.add("openmodal")):"Mail Exist"===t?(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="este correo ya existe",document.getElementById("messagebox").classList.add("openmodal")):(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")):(document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal"))})).catch((function(e){console.log(e),document.getElementById("loadingbox").classList.remove("openmodal"),document.getElementById("mesageboxtext").innerHTML="ha ocurrido un error",document.getElementById("messagebox").classList.add("openmodal")}))},setuser:re,setpass:$,user:se,password:Z,close:function(e){document.getElementById("singupmodal").classList.remove("openmodal"),e.preventDefault()},username:ae,setUsername:ne,userroll:Q,setUserroll:W}),o.a.createElement(L,{user:p,loged:a,logout:function(){document.getElementById("dashboard").classList.remove("openmodal"),g(""),D(""),z(""),N(""),d(""),l(!1)},token:m,userid:O,prospectosData:F,setProspectosdata:R,username:y,userroll:E}),o.a.createElement(_,{close:function(){document.getElementById("messagebox").classList.remove("openmodal")}}),o.a.createElement(T,null))});s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(D,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.eb167e38.chunk.js.map